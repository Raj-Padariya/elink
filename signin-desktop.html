<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign In with Email</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
  
</head>
<body>
  <section class="signin-desktop">
    <div class="signin-desktop-inner">
      <div class="e-link_container">
        <div class="signin-desktop-screen">
          <div class="signin-secreen-logo">
            <img src="./assets/images/e-link-logo.svg" alt="">
            <h1>Welcome back! Sign In here.</h1>
          </div>

          <!-- Signin Form -->
          <div class="signin-secreen-form">
            <form action="action.php">
              <!-- Email Input -->
              <div class="site_input-group input-group-email">
                <input type="email" name="email" class="site_input" placeholder="Your Email Address" required />
                <label>Email*</label>
                <span class="fake-caret"></span>
                <div class="error-input-icon">
                  <img src="./assets/images/error-input-icon.svg" alt="">
                </div>
              </div>

              <div class="site_glow-btn signin-secreen-form-btn">
                <button type="button" class="open-verify-email">Verify Email</button>
              </div>
            </form>
          </div>

          <div class="create-account-text">
            <p>Don’t have an account? <a href="#">Create One</a></p>
          </div>
        </div>
      </div>

      <!-- Verify Email Popup -->
      <div class="verify-email">
        <div class="verify-email-popup">
          <div class="verify-email-screen">
            <div class="verify-email-close">
              <a href="#"><img src="./assets/images/close-icon.svg" alt=""></a>
            </div>
            <div class="verify-email-heading">
              <h3>Confirm Your Email</h3>
              <div class="verify-email-otp-desc">
                <p>Enter the code sent to your email address <span>example@email.com</span></p>
              </div>
            </div>
            <div class="verify-email-otp">
              <form id="otp-form" class="otp-form">
                <div class="otp-inputs">
                  <div class="site_input-group"><input type="number" class="site_input" maxlength="1"></div>
                  <div class="site_input-group"><input type="number" class="site_input" maxlength="1"></div>
                  <div class="site_input-group"><input type="number" class="site_input" maxlength="1"></div>
                  <div class="site_input-group"><input type="number" class="site_input" maxlength="1"></div>
                </div>
              </form>
              <div class="send-again">
                <div class="dont-revice"><p>Didn’t receive a message?</p></div>
                <div class="send-again-otp"><a href="#">Send it Again</a></div>
              </div>
            </div>

            <div class="verify-email-btn site_btn-bg">
              <a href="#">Verify Email Address</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Custom Thank You Message -->
      <div class="thank-you-message">
        <div class="thank-you-verify">
          <div class="verify-badge">
            <img src="./assets/images/Thank_you_white-and-blue_V2.gif" alt="">
          </div>
          <div class="verify-text">
            <p>The email has been verified</p>
          </div>
        </div>
      </div>

      <!-- Custom Error Message -->
      <div class="error-msg">
        <div class="error-msg-bg">
          <div class="error-msg-icon">
            <img src="./assets/images/error-notification-icon.svg" alt="">
          </div>
          <div class="error-msg-desc">
            <h4></h4>
            <p></p>
          </div>
        </div>
      </div>

    </div>
  </section>

  <script src="./assets/js/gsap.min.js" defer></script>
  <!-- JS -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const verifyOpenBtn = document.querySelector(".open-verify-email");
      const popup = document.querySelector(".verify-email");
      const popupScreen = document.querySelector(".verify-email-screen");
      const closeBtn = document.querySelector(".verify-email-close a");
      const otpInputs = document.querySelectorAll(".otp-form .site_input");
      const verifyBtn = document.querySelector(".verify-email-btn a");

      const thankYou = document.querySelector(".thank-you-message");
      const errorBox = document.querySelector(".error-msg");
      const errorTitle = errorBox.querySelector("h4");
      const errorText = errorBox.querySelector("p");
      const otpContainer = document.querySelector(".otp-inputs");

      // Initial GSAP setup
      gsap.set([popup, popupScreen, thankYou, errorBox], { opacity: 0, display: "none" });
      gsap.set(popupScreen, { y: 80, scale: 0.95 });
      gsap.set(errorBox, { y: -100, xPercent: -50, left: "50%", position: "fixed", top: "20px", zIndex: 9999 });

      // --- OPEN POPUP ---
      verifyOpenBtn.addEventListener("click", (e) => {
        e.preventDefault();
        gsap.set(popup, { display: "block" });
        gsap.timeline()
          .to(popup, { opacity: 1, duration: 0.4, ease: "power2.out" })
          .set(popupScreen, { display: "block" })
          .to(popupScreen, { opacity: 1, y: 0, scale: 1, duration: 0.6, ease: "power4.out", onComplete: () => otpInputs[0]?.focus() });
      });

      // --- CLOSE POPUP ---
      const closePopup = () => {
        gsap.timeline()
          .to(popupScreen, { y: 80, scale: 0.95, opacity: 0, duration: 0.4, ease: "power2.inOut" })
          .to(popup, { opacity: 0, duration: 0.3, ease: "power1.inOut", onComplete: () => {
            gsap.set([popup, popupScreen], { display: "none" });
            otpInputs.forEach(i => i.value = "");
          }});
      };
      closeBtn.addEventListener("click", (e) => { e.preventDefault(); closePopup(); });

      // OTP input logic
      otpInputs.forEach((input, i) => {
        input.addEventListener("input", () => { 
          input.value = input.value.slice(0, 1); 
          if(input.value && i < otpInputs.length-1) otpInputs[i+1].focus(); 
        });
        input.addEventListener("keydown", (e) => { 
          if(e.key==="Backspace" && !input.value && i>0) otpInputs[i-1].focus(); 
        });
        input.addEventListener("paste", (e) => {
          e.preventDefault();
          const paste = e.clipboardData.getData("text").trim().slice(0, otpInputs.length);
          otpInputs.forEach((box, idx) => box.value = paste[idx] || "");
          otpInputs[Math.min(paste.length, otpInputs.length)-1]?.focus();
        });
      });

      // --- SHOW ERROR WITH SHAKE & CLEAR OTP ---
      const showError = (title, text) => {
        errorTitle.textContent = title;
        errorText.textContent = text;

        // Show error box
        gsap.set(errorBox, { display: "flex", opacity: 0, y: -100 });
        gsap.timeline()
          .to(errorBox, { opacity: 1, y: 20, duration: 0.6, ease: "elastic.out(1,0.5)" })
          .to(errorBox, { opacity: 0, y: -100, duration: 0.4, ease: "power1.in", delay: 3, onComplete: () => gsap.set(errorBox, { display: "none" }) });

        // Shake OTP container
        gsap.fromTo(
          otpContainer,
          { x: -10 },
          { x: 10, duration: 0.05, repeat: 5, yoyo: true, ease: "power1.inOut" }
        );

        // Flash red border effect
        otpInputs.forEach(input => {
          gsap.fromTo(
            input,
            { borderColor: "#ccc" },
            { borderColor: "#ff4d4f", duration: 0.1, repeat: 2, yoyo: true }
          );
        });

        // Clear inputs after shake
        otpInputs.forEach(input => input.value = "");
        otpInputs[0]?.focus();
      };

      // --- VERIFY OTP ---
      verifyBtn.addEventListener("click", (e) => {
        e.preventDefault();
        const otpValue = Array.from(otpInputs).map(i => i.value).join("");
        if(otpValue.length < otpInputs.length) return showError("Missing OTP", "Please enter the full code.");
        if(otpValue !== "1234") return showError("Invalid OTP", "Please enter a valid OTP.");

        // Success → show thank you
        closePopup();
        gsap.set(thankYou, { display: "flex", opacity: 0, scale: 0.8 });
        gsap.timeline()
          .to(thankYou, { opacity: 1, scale: 1, duration: 0.6, ease: "back.out(1.7)" })
          .to(thankYou, { opacity: 0, scale: 0.9, duration: 0.5, ease: "power2.inOut", delay: 4, onComplete: () => gsap.set(thankYou, { display: "none" }) });
      });
    });
  </script>
</body>
</html>
